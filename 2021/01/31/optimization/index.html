<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"maxcdon.github.io","root":"/blog/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="背景随着业务的不断迭代，项目日渐壮大，为了给用户提供更优的体验，前端优化是我们避不开的话题。一个优秀的网站必然是拥有丰富功能的同时具有比较块的响应速度，想必我们浏览网页时都更喜欢丝般顺滑的感受。作为前端工程师来说，项目优化主要关注一下几点：白屏时间、首屏时间、整页时间、DNS时间、CPU占用率。就我们目前项目而言采用 Angular 开发，首屏加载时间是 9.2 秒，这个速度对用户而言大大降低了">
<meta property="og:type" content="article">
<meta property="og:title" content="【前端优化】首屏加载 9.2s 压缩至 3.6 s">
<meta property="og:url" content="https://maxcdon.github.io/blog/2021/01/31/optimization/index.html">
<meta property="og:site_name" content="MaxCheng&#39;blog">
<meta property="og:description" content="背景随着业务的不断迭代，项目日渐壮大，为了给用户提供更优的体验，前端优化是我们避不开的话题。一个优秀的网站必然是拥有丰富功能的同时具有比较块的响应速度，想必我们浏览网页时都更喜欢丝般顺滑的感受。作为前端工程师来说，项目优化主要关注一下几点：白屏时间、首屏时间、整页时间、DNS时间、CPU占用率。就我们目前项目而言采用 Angular 开发，首屏加载时间是 9.2 秒，这个速度对用户而言大大降低了">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c86cfa2a84a84b2b92f9117fce8000a0~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bd50caa16d4e4ec09e803c614ede34d8~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a5de634a37e46f79576769d3713c7f5~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3e4974df57a4eebb4a868374defbd17~tplv-k3u1fbpfcp-watermark.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45823bedcf9c4c6789b0cdc46c4d176f~tplv-k3u1fbpfcp-watermark.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/480a94c2987d44c69df9576a5cfc5954~tplv-k3u1fbpfcp-watermark.image">
<meta property="article:published_time" content="2021-01-31T14:18:47.000Z">
<meta property="article:modified_time" content="2021-03-01T01:23:59.150Z">
<meta property="article:author" content="Max Cheng">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c86cfa2a84a84b2b92f9117fce8000a0~tplv-k3u1fbpfcp-zoom-1.image">

<link rel="canonical" href="https://maxcdon.github.io/blog/2021/01/31/optimization/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>【前端优化】首屏加载 9.2s 压缩至 3.6 s | MaxCheng'blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">MaxCheng'blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">step by step</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://maxcdon.github.io/blog/2021/01/31/optimization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Max Cheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MaxCheng'blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【前端优化】首屏加载 9.2s 压缩至 3.6 s
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-31 22:18:47" itemprop="dateCreated datePublished" datetime="2021-01-31T22:18:47+08:00">2021-01-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-01 09:23:59" itemprop="dateModified" datetime="2021-03-01T09:23:59+08:00">2021-03-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c86cfa2a84a84b2b92f9117fce8000a0~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p>
<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>随着业务的不断迭代，项目日渐壮大，为了给用户提供更优的体验，前端优化是我们避不开的话题。一个优秀的网站必然是拥有丰富功能的同时具有比较块的响应速度，想必我们浏览网页时都更喜欢丝般顺滑的感受。<br>作为前端工程师来说，项目优化主要关注一下几点：白屏时间、首屏时间、整页时间、DNS时间、CPU占用率。就我们目前项目而言采用 Angular 开发，首屏加载时间是 9.2 秒，这个速度对用户而言大大降低了使用体验，通过本次优化将首屏加载压缩至 3.6 秒，接下来将逐步阐述本次优化的过程。</p>
<h1 id="PageSpeed-Insights定位问题"><a href="#PageSpeed-Insights定位问题" class="headerlink" title="PageSpeed Insights定位问题"></a>PageSpeed Insights定位问题</h1><p>其实早在之前就有对项目首页优化的想法，因为前端优化这个概念相对庞大，范围涉及比较广，往往对着项目无从下手。我也是在优化之前阅读并借鉴了很多优秀的文章，最终找到了一个非常好用的工具-PageSpeed Insights for Chrome。这是一个谷歌浏览器插件，可以用来定位网页存在的性能问题，安装好把它加入到 DevTools 就可以开始愉快的找问题了。<br><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bd50caa16d4e4ec09e803c614ede34d8~tplv-k3u1fbpfcp-zoom-1.image" alt=""><br>以上图为例可看到 PageSpeed Insights 会把网页存在待优化的问题分类列出，并且每个类目下可以定位到具体的文件，这样一来原本很抽象的前端优化就很形象得呈现在我们眼前了。优化的方向主要分为代码压缩、浏览器缓存、静态资源压缩，方向明确了就可以开始围绕问题开始动手改造。</p>
<blockquote>
<p>前端优化总的来说还是离不开那句话，减少请求文件数量同时减小请求文件体积。</p>
</blockquote>
<h1 id="代码压缩"><a href="#代码压缩" class="headerlink" title="代码压缩"></a>代码压缩</h1><p>结合前端工程化思想，我姑且把代码压缩分为两大类，一类是项目使用打包工具构建时文件的的压缩，例如 Webpack 各种压缩 Plugin 的配置，另一类是对前端服务器传输响应的压缩配置，例如 Nginx 的 Gzip。</p>
<h2 id="Webpack-配置"><a href="#Webpack-配置" class="headerlink" title="Webpack 配置"></a>Webpack 配置</h2><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a5de634a37e46f79576769d3713c7f5~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p>
<p>由于 Angular-Cli 集成了内部集成了 Webpack，并且重新进行了封装，所以在 Angular 6.0+ 项目中，想要优化或者更改Webpack打包配置需要通过 Angular-Builders，这里需要我们单独安装包。当然如果是直接用Webpack打包的项目就可以直接省略这一步。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install @angular-builders&#x2F;custom-webpack --save-dev</span><br><span class="line">npm install @angular-devkit&#x2F;build-angular --save-dev</span><br></pre></td></tr></table></figure>

<p>不需要再单独安装 webpack 和 webpack-dev-server，因为这两个是 @angular-devkit/build-angular 的依赖包，在安装 @angular-devkit/build-angular 会自动安装 webpack 和 webpack-dev-server。</p>
<p>安装完成后要更改 angular.json 文件配置，把我们之后要添加的 webpack 配置，加在运行（serve）和编译（build）命令里，那么关键的配置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&quot;architect&quot;: &#123;</span><br><span class="line">        ......</span><br><span class="line">        &quot;build&quot;: &#123;</span><br><span class="line">            &quot;builder&quot;: &quot;@angular-builders&#x2F;custom-webpack:browser&quot;,</span><br><span class="line">            &quot;options&quot;: &#123;</span><br><span class="line">                &quot;customWebpackConfig&quot;: &#123;</span><br><span class="line">                    &quot;path&quot;: &quot;.&#x2F;webpack.config.js&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;serve&quot;: &#123;</span><br><span class="line">            &quot;builder&quot;: &quot;@angular-builders&#x2F;custom-webpack:dev-server&quot;,</span><br><span class="line">            &quot;options&quot;: &#123;</span><br><span class="line">                &quot;customWebpackConfig&quot;: &#123;</span><br><span class="line">                    &quot;path&quot;: &quot;.&#x2F;webpack.config.js&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>接着需要在根目录下创建配置文件，我这里把它命名为 webpack.config.js。到这一步链接 Angular和自定义 Webpack 配置的准备工作已经就位了，现在我们可以把需要的Webpack配置写进新建的文件中。<br>引入压缩插件，分别对 Js、Html、Css 进行压缩，Js压缩：<code>UglifyJsPlugin</code>，Html压缩<code>HtmlWebpackPlugin</code>，提取公共资源：<code>CommonsChunkPlugin</code>，提取css并压缩：<code>ExtractTextPlugin</code>  。</p>
<h2 id="配置Nginx压缩"><a href="#配置Nginx压缩" class="headerlink" title="配置Nginx压缩"></a>配置Nginx压缩</h2><p>因为我们的前端项目都是通过 Nginx 部署，所以我们还需要在 Nginx 上开启 Gzip 传输压缩，这能使传输的打包文件体积压缩至原来的1/4左右，效果非常明显。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gzip on;</span><br><span class="line">gzip_types text&#x2F;plain application&#x2F;javascriptapplication&#x2F;x-javascripttext&#x2F;css application&#x2F;xml text&#x2F;javascriptapplication&#x2F;x-httpd-php application&#x2F;vnd.ms-fontobject font&#x2F;ttf font&#x2F;opentype font&#x2F;x-woff image&#x2F;svg+xml;</span><br></pre></td></tr></table></figure>

<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3e4974df57a4eebb4a868374defbd17~tplv-k3u1fbpfcp-watermark.image" alt=""></p>
<p>配置好重新启动Nginx，当看到请求响应头中有 Content-Encoding: gzip，说明传输压缩配置已经生效，此时可以看到我们请求文件的大小已经压缩很多。</p>
<h1 id="静态资源压缩"><a href="#静态资源压缩" class="headerlink" title="静态资源压缩"></a>静态资源压缩</h1><h2 id="使用雪碧图"><a href="#使用雪碧图" class="headerlink" title="使用雪碧图"></a>使用雪碧图</h2><p>雪碧图的作用就是减少请求数，而且多张图片合在一起后的体积会少于多张图片的体积总和，这也是比较通用的图片压缩方案，推荐一款雪碧图生成工具<br><a href="https://www.toptal.com/developers/css/sprite-generator" target="_blank" rel="noopener">sprite-generator</a><br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45823bedcf9c4c6789b0cdc46c4d176f~tplv-k3u1fbpfcp-watermark.image" alt=""></p>
<h2 id="使用WebP格式图片"><a href="#使用WebP格式图片" class="headerlink" title="使用WebP格式图片"></a>使用WebP格式图片</h2><p>WebP 是 Google 团队开发的加快图片加载速度的图片格式，其优势体现在它具有更优的图像数据压缩算法，能带来更小的图片体积，而且拥有肉眼识别无差异的图像质量，同时具备了无损和有损的压缩模式、Alpha 透明以及动画的特性，在 JPEG 和 PNG 上的转化效果都相当优秀、稳定和统一。<br>同样推荐一个生成WebP格式的工具<br><a href="https://www.upyun.com/webp" target="_blank" rel="noopener">又拍云WebP</a><br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/480a94c2987d44c69df9576a5cfc5954~tplv-k3u1fbpfcp-watermark.image" alt=""></p>
<h2 id="使用-CDN-加载"><a href="#使用-CDN-加载" class="headerlink" title="使用 CDN 加载"></a>使用 CDN 加载</h2><p>内容分发网络是指一种透过互联网互相连接的电脑网络系统，利用最靠近每位用户的服务器，更快、更可靠地将音乐、图片、视频、应用程序及其他文件发送给用户，来提供高性能、可扩展性及低成本的网络内容传递给用户。<br>把项目中引用的外部资源包通过 CDN 方式引入，以来能减少项目打包文件体积，二来能提高资源请求速度，一举两得。</p>
<h1 id="页面渲染性能优化"><a href="#页面渲染性能优化" class="headerlink" title="页面渲染性能优化"></a>页面渲染性能优化</h1><h2 id="减少重排重绘"><a href="#减少重排重绘" class="headerlink" title="减少重排重绘"></a>减少重排重绘</h2><p>以下三种情况会导致页面重新渲染</p>
<ul>
<li>修改DOM</li>
<li>修改样式</li>
<li>用户事件<br>重新渲染就是重新布局和重新绘制，前者叫重排（reflow），后者叫重绘（repaint）。<br>重排和重绘会影响页面性能以及用户使用体验，所以需要尽量降低重排和重绘的频率，需要注意以下几个方面。</li>
<li>多个 DOM 的读操作尽量写在一起，不要在连续读操作中添加写操作。</li>
<li>如果样式是重排得到的，尽量缓存样式。</li>
<li>不要单一改变样式，最好通过 Class 统一改变。</li>
<li>尽量使用离线 DOM 来改变样式，完成后再将对象写入。</li>
<li>先将元素置为<code>display: none</code>，再对节点进行操作。</li>
<li>position 为 <code>absolute</code> 或 <code>fixed</code> 的元素重排开销比较下，因为不考虑其他元素的影响。</li>
<li>display:none 的节点不会被加入Render Tree, 而 visibility:hidden则会，所以，如果某个节点最开始是不显示的，设为display:none 是更优的。</li>
</ul>
<h2 id="避免CSS、JS阻塞"><a href="#避免CSS、JS阻塞" class="headerlink" title="避免CSS、JS阻塞"></a>避免CSS、JS阻塞</h2><p>谈论资源的阻塞时，我们要清楚，现代浏览器总是并行加载资源。例如，当 HTML 解析器被脚本阻塞时，解析器虽然会停止构建 DOM，但仍会识别该脚本后面的资源，并进行预加载。<br>默认情况下，CSS 被视为阻塞渲染的资源，这意味着浏览器不会渲染任何已处理的内容，直至 CSSOM 构建完毕<br>Javascript 不仅可以读取和修改DOM 属性，还可以读取和修改CSSOM 属性<br>存在阻塞的 CSS 资源时， 浏览器会延迟javascript 的执行和 Render Tree 构建。<br>当浏览器遇到一个script标记时，DOM 构建将暂停，直至脚本完成执行。<br>javascript 可以查询和修改 DOM 与 CSSOM<br>CSSOM 构建时，javascript 执行将暂停，直至 CSSOM 就绪。<br>所以，script 标签的位置很重要。实际使用时，可以遵循下面2个原则  </p>
<ul>
<li>CSS 资源优于 JS 资源引入  </li>
<li>JS 应尽量少影响 DOM 的构建</li>
</ul>
<p>改变 js 阻塞的方式有 defer 和 async<br><code>&lt;script defer&gt;&lt;/script&gt;</code><br>defer 方式加载 script, 不会阻塞 HTML 解析，等到 DOM 生成完毕且 script 加载完毕再执行 Js。<br><code>&lt;script async&gt;&lt;/script&gt;</code><br>async 属性表示异步执行引入的 JS，加载时不会阻塞 HTML解析，但是加载完成后立马执行，此时仍然会阻塞 load 事件。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>前端优化是一个长期的工程，以上也只是部分优化的内容与方向，未来也会保持对前端优化的关注，通过更全面的维度提高项目性能。</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/2020/12/18/summary-2020/" rel="prev" title="2020黑天鹅后学会拥抱变化">
      <i class="fa fa-chevron-left"></i> 2020黑天鹅后学会拥抱变化
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/2021/02/28/protractor/" rel="next" title="【前端E2E测试】上手Protractor 看这篇就够了">
      【前端E2E测试】上手Protractor 看这篇就够了 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#背景"><span class="nav-number">1.</span> <span class="nav-text">背景</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PageSpeed-Insights定位问题"><span class="nav-number">2.</span> <span class="nav-text">PageSpeed Insights定位问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#代码压缩"><span class="nav-number">3.</span> <span class="nav-text">代码压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Webpack-配置"><span class="nav-number">3.1.</span> <span class="nav-text">Webpack 配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置Nginx压缩"><span class="nav-number">3.2.</span> <span class="nav-text">配置Nginx压缩</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#静态资源压缩"><span class="nav-number">4.</span> <span class="nav-text">静态资源压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#使用雪碧图"><span class="nav-number">4.1.</span> <span class="nav-text">使用雪碧图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用WebP格式图片"><span class="nav-number">4.2.</span> <span class="nav-text">使用WebP格式图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用-CDN-加载"><span class="nav-number">4.3.</span> <span class="nav-text">使用 CDN 加载</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#页面渲染性能优化"><span class="nav-number">5.</span> <span class="nav-text">页面渲染性能优化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#减少重排重绘"><span class="nav-number">5.1.</span> <span class="nav-text">减少重排重绘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#避免CSS、JS阻塞"><span class="nav-number">5.2.</span> <span class="nav-text">避免CSS、JS阻塞</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#总结"><span class="nav-number">6.</span> <span class="nav-text">总结</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Max Cheng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">7</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Max Cheng</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/muse.js"></script>


<script src="/blog/js/next-boot.js"></script>




  















  

  

</body>
</html>
